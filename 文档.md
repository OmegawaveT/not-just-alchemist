> # not-just-alchemist开发文档

## 文件结构

###### 前端界面

前端界面所需文件均置于/gui，内容如下

* Window.py 存放游戏窗口Window与游戏首页固定的Frame
* GameView.py对应于Window.py中的gameframe模块，存放游戏正式开始后的前端界面。statusframe是固定在gameview中的frame，所以写在gameview中。其余游戏玩法界面在gameview中注册，在其他文件中分开存储。
* AlchemistView为炼金术玩法专用界面

###### 游戏逻辑

游戏逻辑所需文件存放在/src中

* game.py存放游戏启动逻辑，是游戏过程的主类
* save.py存放游戏保存与读取的逻辑
* character.py存放游戏有关人物的逻辑
* alchemist.py存放alchemist玩法的逻辑
* adventure.py存放冒险有关的逻辑
* shop.py存放与商店有关的逻辑

## 主要思路与更新进程

#### init

0. 本游戏为前后端分离式项目，由前端引用后端接口实现功能
1. 游戏启动时，先调用前端窗口初始化生成交互界面。由于不涉及游戏本体的启动，不初始化game类（因为需要读取或新建存档）
2. 在点击新建游戏或者读取存档的时候，先读取存档，再利用读到的存档内容初始化game类（未实装），前端新建一个gameview（注意gameview是新建的，依附于已建好的gameframe，因为gameview需要游戏数据支撑所以只能新建）
3. gameview启动后，首先根据游戏存档状态创建statusframe。由于该窗口是常驻在游戏界面的，所以写入到gameview中。之后的数据变化需要在gameview中同步更新。
4. homeview是每回合回归的主界面，也暂时写死在gameview
5. 由于各种界面对物品栏的需求不同，暂时不写统一的构造

#### 2022.2.14

1. 物品系统：
   每个物品不使用类传递，而是使用序号传递，序号的不同分区代表不同的物品类型。
   将物品编号设为8位数，第一位是分类序号，如
   1------- 一般物品
   2------- 过程产物
   3------- 药水
   等
   在游戏加载时载入id->描述的键值对
   物品id由csv保存，按字段分配， id,名称,描述
   为了管理方便，id也是字符串
2. 配方系统：
   炼金过程中的配方由 [ 原料 ] -> [ 产物 ] 键值对dict获取

   以上两系统的对应表项均需要在游戏加载时完成读取
3. 背包系统：
   背包系统为字典数组[{id, num}] ，因为是动态变化的所以需要用label更新机制，每次调用时要重新加载一次

## WIP

0. （本条长期有效）编写各种材料、药水、配方的配置文档，增加条目数量，开发其他玩法
   优化前端界面
1. 炼金术玩法的前后端功能分解与设计：选用配方（提示性与rogue奖励）、选择材料、污染度、精力值
   还需要考虑连续炼制的rogue要素
2. 商店数值设计，售卖药水、材料设计
3. 多种配方的获取设计
